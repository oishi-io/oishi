<% content_for :meta_title, "#{DEFAULT_META["meta_product_name"]} - #{@recipe.name}" %>
<% content_for :meta_description, @recipe.description %>
<% content_for :meta_image, rails_blob_url(@recipe.image) %>

<div id="recipe-show" class="container" >
  <div class="row">
    <div class="col-xs-12 col-md-10 col-md-offset-1">
      <h1 class="header"><%= @recipe.name %></h1>
      <div class="line"></div>

      <div class="row" >
        <div class="col-xs-12 col-sm-4 recipe-topnotes">

          <div class="servingsandtime">
            <div class="recipe__info__container">
              <span class="icon__container"><%= svg 'chopsticks' %><p><%= @recipe.servings %> pers.</p></span>
              <span class="icon__container"><%= svg 'chef-hat' %><p><%= @recipe.difficulty %></p></span>
              <span class="icon__container"><%= svg 'whisk' %><p><%= @recipe.preparation_time %> min</p></span>
              <span class="icon__container">
                <%= svg 'cooking' %>
                <% if @recipe.cooking_time > 0 %>
                  <p><%= @recipe.cooking_time %> min</p>
                <% else %>
                  <p>-</p>
                <% end %>
              </span>
            </div>
          </div>

          <div class="recipe-description">
            <p><%= @recipe.description %></p>
          </div>
        </div>

        <div class="col-xs-12 col-sm-8 recipe-image">
          <% if @recipe.image.attached? %>
            <%= image_tag @recipe.image %>
          <% end %>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4 col-xs-12 recipe-info">
          <div class="recipe-mesures">
            <h3>Ingrédients</h3>
            <div class="line line__small"></div>
            <ul>
              <% @measures.each do |measure| %>
                <li>
                  <p class="measure__quantity"><%= measure.quantity %></p>
                  <p>
                    <%= measure.text_1 %>
                    <%= measure.ingredient.name %>
                    <%= measure.text_2 %>
                  </p>
                </li>
              <% end %>
            </ul>
          </div>
        </div>

        <div class="col-sm-8 col-xs-12 recipe-etapes">
          <h3>Préparation</h3>
          <div class="line line__small"></div>

          <% @steps.each_with_index do |step, index| %>
            <% if index.even? %>
              <div class="step__container step__container--left">
                <h1><%= step.order %></h1>
                <p><%= step.text %></p>
              </div>
              <div class="short-line"></div>
            <% else %>
              <div class="step__container step__container--right">
                <p><%= step.text %></p>
                <h1><%= step.order %></h1>
              </div>
              <div class="short-line"></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
